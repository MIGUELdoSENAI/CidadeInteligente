<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Delivery - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="Css/main.css">
</head>
<body>
    <!-- Header com navega√ß√£o -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>Drone Delivery</h1>
                <span class="status-indicator online">Online</span>
            </div>
            <div class="user-info">
                <span class="welcome-text">Bem-vindo, <span id="username">Admin</span></span>
                <button class="btn-logout" id="logoutBtn">Sair</button>
            </div>
        </div>
    </header>

    <!-- Dashboard principal -->
    <main class="dashboard">
        <!-- Se√ß√£o de controle de drones -->
        <section class="control-section">
            <div class="control-card main-control">
                <h2>Central de Controle</h2>
                
                <!-- Status do sistema -->
                <div class="system-status">
                    <div class="status-item">
                        <span class="status-label">Sistema:</span>
                        <span class="status-value" id="systemStatus">Operacional</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Drones Ativos:</span>
                        <span class="status-value" id="activeDrones">3</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Solicita√ß√µes Pendentes:</span>
                        <span class="status-value" id="pendingRequests">100</span>
                    </div>
                </div>

                <!-- Bot√£o principal de sincroniza√ß√£o -->
                <button class="btn-sync" id="syncBtn">
                    <span class="btn-icon">üîÑ</span>
                    <span class="btn-text">Sincronizar Drones</span>
                    <div class="btn-loader"></div>
                </button>

                <!-- Sele√ß√£o de destino -->
                <div class="destination-section">
                    <label for="destination">Selecionar Destino:</label>
                    <select id="destination" class="destination-select">
                        <option value="">Escolha um destino...</option>
                        <option value="centro">Centro da Cidade</option>
                        <option value="zona-norte">Zona Norte</option>
                        <option value="zona-sul">Zona Sul</option>
                        <option value="zona-leste">Zona Leste</option>
                        <option value="zona-oeste">Zona Oeste</option>
                        <option value="aeroporto">Aeroporto</option>
                        <option value="hospital">Hospital Central</option>
                        <option value="universidade">Universidade</option>
                    </select>
                    <button class="btn-deliver" id="deliverBtn" disabled>
                        Iniciar Entrega
                    </button>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de monitoramento -->
        <section class="monitoring-section">
            <h3>Status dos Drones</h3>
            
            <!-- Grid de drones -->
            <div class="drones-grid">
                <!-- Drone 1 -->
                <div class="drone-card" data-drone="1">
                    <div class="drone-header">
                        <h4>Drone Alpha-01</h4>
                        <span class="drone-status available">Dispon√≠vel</span>
                    </div>
                    <div class="drone-info">
                        <div class="info-item">
                            <span class="info-label">Bateria:</span>
                            <div class="battery-indicator">
                                <div class="battery-fill" style="width: 85%"></div>
                            </div>
                            <span class="battery-percent">85%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Localiza√ß√£o:</span>
                            <span class="info-value">Base Central</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">√öltima Miss√£o:</span>
                            <span class="info-value">14:32 - Centro</span>
                        </div>
                    </div>
                </div>

                <!-- Drone 2 -->
                <div class="drone-card" data-drone="2">
                    <div class="drone-header">
                        <h4>Drone Beta-02</h4>
                        <span class="drone-status delivering">Em Entrega</span>
                    </div>
                    <div class="drone-info">
                        <div class="info-item">
                            <span class="info-label">Bateria:</span>
                            <div class="battery-indicator">
                                <div class="battery-fill" style="width: 62%"></div>
                            </div>
                            <span class="battery-percent">62%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Destino:</span>
                            <span class="info-value">Zona Norte</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">ETA:</span>
                            <span class="info-value">8 min</span>
                        </div>
                    </div>
                </div>

                <!-- Drone 3 -->
                <div class="drone-card" data-drone="3">
                    <div class="drone-header">
                        <h4>Drone Gamma-03</h4>
                        <span class="drone-status charging">Carregando</span>
                    </div>
                    <div class="drone-info">
                        <div class="info-item">
                            <span class="info-label">Bateria:</span>
                            <div class="battery-indicator charging-animation">
                                <div class="battery-fill" style="width: 34%"></div>
                            </div>
                            <span class="battery-percent">34%</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Tempo Restante:</span>
                            <span class="info-value">45 min</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">√öltima Miss√£o:</span>
                            <span class="info-value">13:15 - Aeroporto</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de solicita√ß√µes de usu√°rios -->
        <section class="requests-section">
            <h3>Solicita√ß√µes de Entrega</h3>
            <ul class="requests-list" id="requestsList">
                <!-- As solicita√ß√µes de 100 usu√°rios ser√£o listadas dinamicamente pelo JS -->
            </ul>
        </section>

        <!-- Se√ß√£o de logs de atividade -->
        <section class="activity-section">
            <h3>Log de Atividades</h3>
            <div class="activity-log" id="activityLog">
                <div class="log-item success">
                    <span class="log-time">15:23</span>
                    <span class="log-message">Drone Alpha-01 sincronizado com sucesso</span>
                </div>
                <div class="log-item info">
                    <span class="log-time">15:18</span>
                    <span class="log-message">Entrega iniciada - Destino: Centro da Cidade</span>
                </div>
                <div class="log-item success">
                    <span class="log-time">14:45</span>
                    <span class="log-message">Drone Beta-02 retornou √† base</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de confirma√ß√£o -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h3>Confirmar A√ß√£o</h3>
            <p id="modalMessage">Deseja realmente executar esta a√ß√£o?</p>
            <div class="modal-buttons">
                <button class="btn-cancel" id="modalCancel">Cancelar</button>
                <button class="btn-confirm" id="modalConfirm">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Notifica√ß√µes toast -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Script principal -->
    <script src="js/main.js"></script>

    <script>
        // Preencher lista de solicita√ß√µes no HTML
        document.addEventListener('DOMContentLoaded', () => {
            const requestsList = document.getElementById('requestsList');
            appState.userRequests.forEach(req => {
                const li = document.createElement('li');
                li.textContent = `${req.user} -> ${getDestinationName(req.destination)} [${req.status}]`;
                requestsList.appendChild(li);
            });

            // Atualizar contador de solicita√ß√µes pendentes
            const pendingCount = appState.userRequests.filter(r => r.status === 'pending').length;
            document.getElementById('pendingRequests').textContent = pendingCount;
        });
    </script>
</body>
</html>
